<!DOCTYPE html>
<!--
SelfEd - Passing and Receiving functions as parameters of a function

//  http://javascriptissexy.com/understand-javascript-callback-functions-and-use-them/
//  http://edumaven.com/javascript-programming/passing-function-as-parameter
//  http://javascriptissexy.com/understand-javascript-closures-with-ease/
//  https://www.smashingmagazine.com/2014/07/dont-be-scared-of-functional-programming/
//  http://recurial.com/programming/understanding-callback-functions-in-javascript/

-->
<html>
<head>
    <title>SelfEd - JS Closures of Functions</title>
    <link rel="SHORTCUT ICON" href="http://www.tarptiedown.com/ttd-website/ttd-website-pics-videos/instruction-images/teacherIcon.png"> 
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    
button 
{
font-size:20px;
background-color:yellow;
border:2px solid black;
border-radius: 4px;
box-shadow: 3px 3px 3px #CCCCCC;
cursor: pointer;
padding: 20px 10px;
}    

#btn2
{
background-color:cyan;    
}

</style>
</head>

<body>
    <div style="font-size:20px; color:darkblue">
        <h1 style="font-weight:bold;">SelfEd - Javascript Function Closures</h1>
        <b><u>This is a simple example of:</u></b><br>
        1)  A function declaration and definition,<br>
        2)  then closure of the function,<br>
        3)  then invocation of the function.<br><br>
        <b><u>Put another way:</u></b><br>
        A function is first declared (just like a variable) but without the  ' () ' at the end.<br>
        Then the function is defined elsewhere in the code. See Code Block AAA<br>
        In this example the function is defined within an outer function.<br>
        The outer function is invoked with a button click which subsequently<br>
        defines the function that will then close when the outer function closes.<br>
        Later, it is invoked by simply adding the ' () ' to the<br>
        end of the function's name which invokes it.<br><br>
        <span style="color:red"><b><u>Note: </u></b></span> 
        Be sure to declare the function within the scope of where it will be used.<br>
        In this example it is declared globally.<br><br>
               
        <span style="color:red"><b><u>Note: </u></b></span> 
        These kinds of functions are intended to be 
        <a href="https://en.wikipedia.org/wiki/Immutable_object" target="_blank">
            immutable and stateless.
        </a><br>
        These functions are a key component of functional programming.
    </div>
    <br><br>
      
    <div style="font-size:20px; color:red;">
        Click the yellow button to call an outer function that has an inner <br>
        function which is then defined. Note: The inner function was declared  <br>
        upon page load. Now with the button clicked it has been defined. <br> 
        Then it closes when the outer function closes. It has NOT been invoked  <br>
        but now it's ready to be invoked at any time. See 
        <span style="color:black;">Code Block AAA.</span> <br>
        The inner function (although un-invoked can be treated like a variable). <br>
        It's only invoked when you add ' () ' to the end of it.<br><br>
    </div>
        <button onclick="OuterFunction(), scrollBy(0,400);">
            Click to define then close a function (called closedFunction) without invoking it.
        </button><br><br>
    <div style="position:relative;">    
            <button id="btn2" onclick="displayClosedFunction()" style="display:none;">Click to invoke the closed function</button><br>
        <div id="afterClose"></div>
        <div id="closure"></div>
    </div>    

<script>

/******************************************************************************/

    var closedFunction;
    var globalVar = "This text is the value of the variable 'globalVar' that has global scope."
    
    function OuterFunction(){

        var outerVar = "This text is the value of the variable 'outerVar' that has outer function scope.";
        
        document.getElementById("btn2").style.display = "inline";
        // Code Block AAA
        closedFunction = function(){
            var closureVar = "This text is the value of the variable 'closureVar' that has inner function scope.";
            document.getElementById("closure").innerHTML =  
                "This blue text is called from this inner (yet closed) function upon invocation.<br>" +    
                closureVar + "<br>" + outerVar + "<br>" + globalVar;
      
            document.getElementById("closure").style.fontSize = "18px";
            document.getElementById("closure").style.color = "blue";
            document.getElementById("closure").style.position = "absolute";
            document.getElementById("closure").style.top = "3px";
            document.getElementById("closure").style.left = "350px";
        };
        
        document.getElementById("afterClose").innerHTML = 
        "<br>The inner function has now been defined and it, along with the outer<br>" +
        "function are now closed. Click the cyan button to invoke the inner<br>" +
        "function. Invoking the inner function requires adding ' () ' to the<br>" +
        "end of its name. In this example it went from being treated as a<br>" +
        "variable called ' closedFunction ' to being invoked by expressing it<br>" +
        "as ' closedFunction() '.<br>" +
        "See <span style=\"color:black;\">Code Block BBB</span> in the code for the function call.";
        document.getElementById("afterClose").style.color = "red";
        document.getElementById("afterClose").style.fontSize = "20px"; 
    }

        // Code Block BBB
        function displayClosedFunction(){
            closedFunction();
        }
 
</script>    
</body>
</html>
